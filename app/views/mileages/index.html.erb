<h2 class="mb-3">走行距離</h2>
<hr class="mb-4">
<div class="row">
  <div class="col-6">
    <%= search_form_for(@q, url: mileages_path) do |f| %>
      <div class="form-group row">
        <div class="col-3">
          <%= f.label "配送日" %>
        </div>
        <div class="col-4">
          <%= f.date_field :delivery_date_gteq, class:"form-control" %>
        </div>
        <div class="col-1">〜</div>
        <div class="col-4">
          <%= f.date_field :delivery_date_lteq, class:"form-control" %>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-3">
          <%= f.label "ドライバー名" %>
        </div>
        <div class="col-9">
          <%= f.text_field :user_name_eq, class:"form-control" %>
        </div>
      </div>
      <br>
      <%= f.submit '検索', class:"btn btn-primary shadow" %>
    <% end %>
    <% @driver.each do |driver| %>
    <%= driver %>
    <% end%>
    <input type="hidden" id = "drivers" value=<%= @drivers %> >
    <input name="arr_json" type="hidden" value=<%= @arr_json %> class='arr_json'/>
  </div>
  <div class="col-6">
    <canvas id="myChart"></canvas>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script>
const driversJson = $('#drivers').val();
var drivers = JSON.parse(driversJson);
console.log(drivers);
var ctx = document.getElementById('myChart');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: drivers,
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
</script>
